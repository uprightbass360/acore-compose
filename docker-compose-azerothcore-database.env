# AZEROTHCORE DATABASE LAYER ENVIRONMENT

# ==============================================
# DEPLOYMENT CONFIGURATION
# ==============================================
# Storage root path - local: ./storage, production: /nfs/containers or custom mount
STORAGE_ROOT=./storage
# Storage configuration for database layer
STORAGE_PATH=${STORAGE_ROOT}/azerothcore

# ==============================================
# SERVER CONFIGURATION 
# ==============================================
# Timezone
TZ=UTC

# ==============================================
# DATABASE CREDENTIALS 
# ==============================================
MYSQL_ROOT_PASSWORD=azerothcore123

# ==============================================
# Database connection settings
# ==============================================
MYSQL_HOST=ac-mysql
MYSQL_PORT=3306
MYSQL_USER=root
MYSQL_ROOT_HOST=%
MYSQL_PASSWORD=${MYSQL_ROOT_PASSWORD}

# ==============================================
# Database names
# ==============================================
DB_AUTH_NAME=acore_auth
DB_WORLD_NAME=acore_world
DB_CHARACTERS_NAME=acore_characters

# ==============================================
# Database wait settings
# ==============================================
DB_WAIT_RETRIES=60
DB_WAIT_SLEEP=10

# ==============================================
# Database layer images
# ==============================================
AC_DB_IMPORT_IMAGE=acore/ac-wotlk-db-import:14.0.0-dev
MYSQL_IMAGE=mysql:8.0
ALPINE_IMAGE=alpine:latest

# ==============================================
# IMAGE PULL POLICY 
# ==============================================
IMAGE_PULL_POLICY=if_not_present

# ==============================================
# MYSQL CONFIGURATION
# ==============================================
MYSQL_CHARACTER_SET=utf8mb4
MYSQL_COLLATION=utf8mb4_unicode_ci
MYSQL_MAX_CONNECTIONS=1000
MYSQL_INNODB_BUFFER_POOL_SIZE=256M
MYSQL_INNODB_LOG_FILE_SIZE=64M

# ==============================================
# MySQL health check settings 
# ==============================================
MYSQL_HEALTHCHECK_INTERVAL=20s
MYSQL_HEALTHCHECK_TIMEOUT=15s
MYSQL_HEALTHCHECK_RETRIES=25
MYSQL_HEALTHCHECK_START_PERIOD=120s

# ==============================================
# NETWORK CONFIGURATION 
# ==============================================
# External database port
MYSQL_EXTERNAL_PORT=64306

# ==============================================
# CONTAINER NAMES
# ==============================================
# Database layer container names
CONTAINER_MYSQL=ac-mysql
CONTAINER_DB_INIT=ac-db-init
CONTAINER_DB_IMPORT=ac-db-import
CONTAINER_BACKUP=ac-backup

# ==============================================
# NETWORK SETTINGS 
# ==============================================
NETWORK_NAME=azerothcore
NETWORK_SUBNET=172.20.0.0/16
NETWORK_GATEWAY=172.20.0.1

# ==============================================
# BACKUP CONFIGURATION 
# ==============================================
# Host volume paths for backup
HOST_BACKUP_PATH=${STORAGE_PATH}/backups
HOST_BACKUP_SCRIPTS_PATH=${STORAGE_PATH}/scripts

# ==============================================
# Backup settings
# ==============================================
BACKUP_CRON_SCHEDULE="0 3 * * *"
BACKUP_RETENTION_DAYS=7